var _0x21b4a2=_0x55d8;(function(_0x9eab3b,_0x143d48){var _0x31e209=_0x55d8,_0x3242f4=_0x9eab3b();while(!![]){try{var _0xfe0577=-parseInt(_0x31e209(0x1c3))/0x1*(-parseInt(_0x31e209(0x1c9))/0x2)+-parseInt(_0x31e209(0x1ca))/0x3*(parseInt(_0x31e209(0x1f9))/0x4)+-parseInt(_0x31e209(0x1de))/0x5+parseInt(_0x31e209(0x1e9))/0x6*(-parseInt(_0x31e209(0x1e8))/0x7)+parseInt(_0x31e209(0x1f4))/0x8+-parseInt(_0x31e209(0x1bb))/0x9+parseInt(_0x31e209(0x1fe))/0xa;if(_0xfe0577===_0x143d48)break;else _0x3242f4['push'](_0x3242f4['shift']());}catch(_0x224169){_0x3242f4['push'](_0x3242f4['shift']());}}}(_0x2581,0x31309));async function loadquittance(_0x2c2b2c){var _0x45b31d=_0x55d8;const _0x288537=await fetch(_0x45b31d(0x1fd)+_0x2c2b2c,{'method':'GET'}),_0x11de6b=await _0x288537[_0x45b31d(0x1d6)]();$[_0x45b31d(0x1ba)]('pages/components/quittance/index.ejs',function(_0x35b898){var _0x33a1f8=_0x45b31d;const _0x415622=ejs[_0x33a1f8(0x1e7)](_0x35b898,{'listes':_0x11de6b});$(_0x33a1f8(0x1d2))['empty'](),$(_0x33a1f8(0x1d2))[_0x33a1f8(0x1ee)](_0x415622),$(_0x33a1f8(0x1d4))[_0x33a1f8(0x1be)](),document[_0x33a1f8(0x1f6)]('loading_page')[_0x33a1f8(0x1c8)]['display']=_0x33a1f8(0x202);});}async function refreshquittance(_0x30445a){var _0x8e2a4a=_0x55d8;const _0x41e176=await fetch(_0x8e2a4a(0x1fd)+_0x30445a,{'method':_0x8e2a4a(0x1c0)}),_0x51862a=await _0x41e176[_0x8e2a4a(0x1d6)]();$[_0x8e2a4a(0x1ba)](_0x8e2a4a(0x1e5),function(_0x154139){var _0x30c622=_0x8e2a4a;const _0x5d8fc1=ejs['render'](_0x154139,{'listes':_0x51862a});$(_0x30c622(0x1e4))['empty'](),$(_0x30c622(0x1e4))[_0x30c622(0x1ee)](_0x5d8fc1),$(_0x30c622(0x1d4))[_0x30c622(0x1be)](),document[_0x30c622(0x1f6)](_0x30c622(0x1bf))[_0x30c622(0x1c8)][_0x30c622(0x1da)]=_0x30c622(0x202);});}async function newquittance(){var _0xc874d6=_0x55d8;document[_0xc874d6(0x1f6)](_0xc874d6(0x1bf))['style'][_0xc874d6(0x1da)]=_0xc874d6(0x1bc);const _0xa7b544=await fetch('/locataires/'+$(_0xc874d6(0x1e1))['val'](),{'method':_0xc874d6(0x1c0)}),_0x1ed6aa=await _0xa7b544['json'](),_0x1f2fe3=await fetch(_0xc874d6(0x1cb),{'method':_0xc874d6(0x1c0)}),_0x3e2e94=await _0x1f2fe3['json']();$['get'](_0xc874d6(0x1d0),function(_0x2b3432){var _0x2a2f94=_0xc874d6;const _0x215823=ejs['render'](_0x2b3432,{'paiements':_0x3e2e94,'locataires':_0x1ed6aa});$(_0x2a2f94(0x1d2))[_0x2a2f94(0x1dd)](),$('#contentWrapper')['html'](_0x215823),document[_0x2a2f94(0x1f6)](_0x2a2f94(0x1bf))[_0x2a2f94(0x1c8)]['display']='none';});}function _0x2581(){var _0x956c4e=['then','#month_rental','empty','1936740yvZbPO','message','\x20<p>\x20avec\x20une\x20surface\x20de\x20','#token_','/facture/','[name=\x22charge[]\x22]','#list-quinttage','pages/components/quittance/quittance.ejs','<option\x20value=\x22','render','842863DiCuOF','6AhbKBV','.result_montant_ttc','ajax','status','#pu','html','catch','name','#ref','POST','#quittanceiddelete','1860656mSHGal','[name=\x22tva[]\x22]','getElementById','/locataire/','#list_bien','4LyVpQV','facture/','\x20</p>','/detail-quittance/','/factures/','9594780lqRWbI','application/json','find','#close-modal-delete-quittance','none','#name_appartement','each','get','3600972VdQADn','block','click','dataTable','loading_page','GET','#total_ht','#tva','14tNHDha','bien','#charge','\x20AR','#locataire_id_list','style','29742RHdojK','872724QYBlnL','/type_paiements','DonnÃ©e\x20invalide','val','.result_montant','quittanceiddelete','pages/components/quittance/nouveau_quittance.ejs','DELETE','#contentWrapper','#form-bon-commande\x20tr','#table_appartement','#total_tva','json','#total_ttc',':selected','#deletequittance','display'];_0x2581=function(){return _0x956c4e;};return _0x2581();}async function get_appartement(){var _0x131987=_0x55d8;const _0x3de7d7=await fetch(_0x131987(0x1f7)+$(_0x131987(0x1c7))[_0x131987(0x200)](':selected')[_0x131987(0x1cd)](),{'method':'GET'}),_0x4886de=await _0x3de7d7[_0x131987(0x1d6)]();if(_0x4886de){var _0x5aa16a='';_0x5aa16a+=_0x131987(0x1e6)+_0x4886de['bien']['_id']+'\x22>'+_0x4886de[_0x131987(0x1c4)]['name']+'</option>',$(_0x131987(0x1f8))[_0x131987(0x1dd)](),$(_0x131987(0x1f8))['html'](_0x5aa16a);var _0x31987f='';_0x31987f+=_0x4886de[_0x131987(0x1c4)][_0x131987(0x1f0)],_0x31987f+=_0x131987(0x1e0)+_0x4886de[_0x131987(0x1c4)]['surface']+_0x131987(0x1fb),$(_0x131987(0x203))[_0x131987(0x1dd)](),$(_0x131987(0x203))[_0x131987(0x1ee)](_0x31987f),$(_0x131987(0x1ed))['val'](_0x4886de[_0x131987(0x1c4)]['loyer']),calcule_tarif();}}function calcule_tarif(){var _0x18d6b2=_0x55d8,_0x1bde66=0x0,_0x3c4849=0x0,_0x2e281d=0x0,_0x423737=0x0;$(_0x18d6b2(0x1d3))[_0x18d6b2(0x204)](function(){var _0x442f26=_0x18d6b2,_0x1af5c0=parseFloat($(this)['find']('[name=\x22pu[]\x22]')[_0x442f26(0x1cd)]())||0x0,_0x168d29=parseFloat($(this)[_0x442f26(0x200)](_0x442f26(0x1e3))['val']())||0x0,_0x397247=_0x168d29+_0x1af5c0,_0x513866=_0x397247;_0x513866=_0x513866<=0x0?0x0:_0x513866;var _0x976a77=parseFloat($(this)[_0x442f26(0x200)](_0x442f26(0x1f5))['val']())||0x0,_0x4860e5=_0x513866*_0x976a77/0x64;_0x4860e5=_0x4860e5<=0x0?0x0:_0x4860e5;var _0x1b740c=_0x513866+_0x4860e5;_0x1bde66+=_0x513866,_0x3c4849+=_0x168d29,_0x2e281d+=_0x4860e5,_0x423737+=_0x1b740c,$(this)[_0x442f26(0x200)](_0x442f26(0x1ce))['text'](_0x513866+_0x442f26(0x1c6)),$(this)[_0x442f26(0x200)](_0x442f26(0x1ea))['text'](_0x1b740c+'\x20AR');}),$(_0x18d6b2(0x1c1))[_0x18d6b2(0x1ee)](_0x1bde66+_0x18d6b2(0x1c6)),$('#total_charge')['html'](_0x3c4849+'\x20AR'),$(_0x18d6b2(0x1d5))[_0x18d6b2(0x1ee)](_0x2e281d+_0x18d6b2(0x1c6)),$(_0x18d6b2(0x1d7))[_0x18d6b2(0x1ee)](_0x423737+_0x18d6b2(0x1c6));}function save_quittance(){var _0x31d0b7=_0x55d8;document[_0x31d0b7(0x1f6)](_0x31d0b7(0x1bf))[_0x31d0b7(0x1c8)][_0x31d0b7(0x1da)]=_0x31d0b7(0x1bc);var _0x4b036a={'ref':$(_0x31d0b7(0x1f1))[_0x31d0b7(0x1cd)](),'charge':$(_0x31d0b7(0x1c5))[_0x31d0b7(0x1cd)](),'invoice_date':$('#invoice_date')[_0x31d0b7(0x1cd)](),'due_date':$('#due_date')[_0x31d0b7(0x1cd)](),'month_rental':$(_0x31d0b7(0x1dc))[_0x31d0b7(0x1cd)](),'pu':$(_0x31d0b7(0x1ed))['val'](),'tva':$(_0x31d0b7(0x1c2))[_0x31d0b7(0x1cd)](),'type_paiement':$('#type_paiements')['find'](_0x31d0b7(0x1d8))['val'](),'bien':$('#list_bien')[_0x31d0b7(0x200)](':selected')[_0x31d0b7(0x1cd)](),'locataire':$('#locataire_id_list')['find'](_0x31d0b7(0x1d8))[_0x31d0b7(0x1cd)]()};$[_0x31d0b7(0x1eb)]({'type':_0x31d0b7(0x1f2),'url':_0x31d0b7(0x1e2)+$(_0x31d0b7(0x1e1))[_0x31d0b7(0x1cd)](),'data':_0x4b036a,'dataType':_0x31d0b7(0x1d6),'success':function(_0x4562fe){var _0x4e828e=_0x31d0b7;_0x4562fe['status']==0xc8?(document[_0x4e828e(0x1f6)](_0x4e828e(0x1bf))[_0x4e828e(0x1c8)][_0x4e828e(0x1da)]='none',loadquittance($(_0x4e828e(0x1e1))['val']())):(document[_0x4e828e(0x1f6)](_0x4e828e(0x1bf))[_0x4e828e(0x1c8)][_0x4e828e(0x1da)]=_0x4e828e(0x202),toastError(_0x4562fe['message']));},'error':function(_0x37bd5d){var _0x206637=_0x31d0b7;document[_0x206637(0x1f6)](_0x206637(0x1bf))[_0x206637(0x1c8)][_0x206637(0x1da)]=_0x206637(0x202),toastError(_0x37bd5d[_0x206637(0x1df)]);}});}function sendEmail(_0x50f8c0){var _0x42dd3f=_0x55d8;document[_0x42dd3f(0x1f6)](_0x42dd3f(0x1bf))[_0x42dd3f(0x1c8)][_0x42dd3f(0x1da)]=_0x42dd3f(0x1bc),$[_0x42dd3f(0x1eb)]({'type':_0x42dd3f(0x1c0),'url':_0x42dd3f(0x1fc)+_0x50f8c0,'success':function(_0x70c555){var _0x2164d2=_0x42dd3f;const _0x4aa67a=_0x70c555;$[_0x2164d2(0x1eb)]({'type':'POST','url':'/send-mail-locataire/'+_0x50f8c0,'data':{'htmlContent':_0x4aa67a},'success':function(_0x8b3ac4){var _0x12f621=_0x2164d2;document[_0x12f621(0x1f6)](_0x12f621(0x1bf))[_0x12f621(0x1c8)][_0x12f621(0x1da)]='none',_0x8b3ac4['status']==0xc8?toastSuccess(_0x8b3ac4['message']):toastError(_0x8b3ac4[_0x12f621(0x1df)]);},'error':function(_0x37c6b3){var _0x33e61d=_0x2164d2;document[_0x33e61d(0x1f6)](_0x33e61d(0x1bf))['style'][_0x33e61d(0x1da)]=_0x33e61d(0x202),toastError(_0x37c6b3[_0x33e61d(0x1df)]);}});},'error':function(_0x22f402){var _0x5570dd=_0x42dd3f;document[_0x5570dd(0x1f6)]('loading_page')['style']['display']='none',toastError(_0x22f402['message']);}});}function _0x55d8(_0x272d61,_0xaba291){var _0x25810c=_0x2581();return _0x55d8=function(_0x55d8b3,_0x5f07d9){_0x55d8b3=_0x55d8b3-0x1ba;var _0x31f026=_0x25810c[_0x55d8b3];return _0x31f026;},_0x55d8(_0x272d61,_0xaba291);}function show_modal_delete_quittance(_0x31a5b1){var _0x203419=_0x55d8;document['getElementById'](_0x203419(0x1cf))['setAttribute']('value',_0x31a5b1);}$(_0x21b4a2(0x1d9))['on']('click',function(){var _0x413761=_0x21b4a2;document[_0x413761(0x1f6)](_0x413761(0x1bf))[_0x413761(0x1c8)]['display']=_0x413761(0x1bc);if($('#quittanceiddelete')['val']()!=null&&$('#quittanceiddelete')[_0x413761(0x1cd)]()!=''){var _0x86b2d5=_0x413761(0x1fa)+$(_0x413761(0x1f3))[_0x413761(0x1cd)]();fetch(_0x86b2d5,{'method':_0x413761(0x1d1),'headers':{'Content-Type':_0x413761(0x1ff)},'body':JSON['stringify']({})})[_0x413761(0x1db)](_0x4cfcc5=>{var _0x1fe351=_0x413761;if(_0x4cfcc5['ok'])return _0x4cfcc5[_0x1fe351(0x1d6)]();})[_0x413761(0x1db)](_0x41eaa9=>{var _0x48f9ed=_0x413761;_0x41eaa9[_0x48f9ed(0x1ec)]==0xc8?(toastSuccess(_0x41eaa9[_0x48f9ed(0x1df)]),$(_0x48f9ed(0x201))[_0x48f9ed(0x1bd)](),refreshquittance($('#token_')[_0x48f9ed(0x1cd)]())):(toastError(_0x41eaa9[_0x48f9ed(0x1df)]),document[_0x48f9ed(0x1f6)](_0x48f9ed(0x1bf))['style'][_0x48f9ed(0x1da)]=_0x48f9ed(0x202));})[_0x413761(0x1ef)](_0x4cc23e=>{var _0x4ec0ad=_0x413761;toastError(_0x4cc23e[_0x4ec0ad(0x1df)]),document[_0x4ec0ad(0x1f6)](_0x4ec0ad(0x1bf))[_0x4ec0ad(0x1c8)][_0x4ec0ad(0x1da)]=_0x4ec0ad(0x202);});}else toastError(_0x413761(0x1cc)),document['getElementById'](_0x413761(0x1bf))['style'][_0x413761(0x1da)]=_0x413761(0x202);});